!function(window,undefined){function documentLoaded(){document.addEventListener?(pca.ignore(document,"DOMContentLoaded",documentLoaded),ready=!0,pca.ready()):"complete"===document.readyState&&(pca.ignore(document,"onreadystatechange",documentLoaded),ready=!0,pca.ready())}function checkDocumentLoad(){"complete"===document.readyState?(ready=!0,pca.ready()):(document.addEventListener?pca.listen(document,"DOMContentLoaded",documentLoaded):pca.listen(document,"onreadystatechange",documentLoaded),pca.listen(window,"load",documentLoaded))}function postRequestXHR(e){var t=new pca.XMLHttpRequest;t.onreadystatechange=function(){4===t.readyState&&200===t.status&&e.callback(pca.parseJSON(t.responseText))},e.credentials&&(t.withCredentials=e.credentials),t.onerror=e.serviceError,t.ontimeout=e.timeoutError,t.open("POST",e.destination,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.setRequestHeader("pca-source",PCA_REQUEST_HEADER),t.send(e.query)}function postRequestForm(e){function t(e,t){var i=document.createElement("input");i.name=e,i.value=t,n.appendChild(i)}var n=document.createElement("form"),i=document.createElement("iframe"),a=!1;n.method="POST",n.action=pca.protocol+"//"+pca.host+"/"+e.service+"/json.ws";for(var o in e.data)t(o,e.data[o]);t("CallbackVariable","window.name"),t("CallbackWithScriptTags","true"),i.onload=function(){a?(e.callback({Items:pca.parseJSON(i.contentWindow.name)}),document.body.removeChild(i)):(a=!0,i.contentWindow.location="about:blank")},i.style.display="none",document.body.appendChild(i);var r=i.contentDocument||i.contentWindow.document;r.body?r.body.appendChild(n):r.appendChild(n),n.submit()}function postRequest(e){"Microsoft Internet Explorer"===navigator.appName?postRequestForm(e):postRequestXHR(e)}function getRequestXHR(e){var t=new pca.XMLHttpRequest;e.url.length>pca.limit?(e.post=!0,postRequest(e)):(t.onreadystatechange=function(){4===t.readyState&&200===t.status&&e.callback(pca.parseJSON(t.responseText))},e.credentials&&(t.withCredentials=e.credentials),t.onerror=e.serviceError,t.ontimeout=e.timeoutError,t.setRequestHeader("pca-source",PCA_REQUEST_HEADER),t.open("GET",e.url,!0),t.send())}function getRequestScript(e){var t=pca.create("script",{type:"text/javascript",async:"async"}),n=document.getElementsByTagName("head")[0];e.position=pca.scriptRequests.push(e),t.src=e.url+"&callback=pca.scriptRequests["+(e.position-1)+"].callback",t.onload=t.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(t.onload=t.onreadystatechange=null,n&&t.parentNode&&n.removeChild(t))},t.src.length>pca.limit?(e.post=!0,postRequest(e)):n.insertBefore(t,n.firstChild)}function getRequest(e){"Microsoft Internet Explorer"===navigator.appName?getRequestScript(e):getRequestXHR(e)}function processRequest(e){function t(){e.callback(pca.requestCache[e.url].response)}return pca.blockRequests&&pca.waitingRequest?void(pca.requestQueue=[e]):(e.block&&(pca.blockRequests=!0),e.queue&&pca.waitingRequest?void pca.requestQueue.push(e):(pca.waitingRequest=!0,e.cache&&pca.requestCache[e.url]?void(window.setImmediate?window.setImmediate(t):window.setTimeout(t,1)):void(e.post?postRequest(e):getRequest(e))))}function processResponse(e){pca.waitingRequest=!1,e.block&&(pca.blockRequests=!1),1===e.response.Items.length&&e.response.Items[0].Error!==undefined?e.error(e.response.Items[0].Description):e.success(e.response.Items,e.response),e.cache&&(pca.requestCache[e.url]=e),e.position&&(pca.scriptRequests[e.position-1]=null),pca.requestQueue.length&&processRequest(pca.requestQueue.shift())}var pca=window.pca=window.pca||{},document=window.document,PCA_REQUEST_HEADER="SalesforceApp-Auto-v1.0.0";pca.protocol="https:"===(window.location||document.location).protocol?"https:":"http:",pca.host="services.postcodeanywhere.co.uk",pca.endpoint="json3ex.ws",pca.limit=2e3,pca.synonyms=[{r:/\bN(?=\s)/,w:"NORTH"},{r:/\b(?:NE|NORTHEAST)(?=\s)/,w:"NORTH EAST"},{r:/\b(?:NW|NORTHWEST)(?=\s)/,w:"NORTH WEST"},{r:/\bS(?=\s)/,w:"SOUTH"},{r:/\b(?:SE|SOUTHEAST)(?=\s)/,w:"SOUTH EAST"},{r:/\b(?:SW|SOUTHWEST)(?=\s)/,w:"SOUTH WEST"},{r:/\bE(?=\s)/,w:"EAST"},{r:/\bW(?=\s)/,w:"WEST"},{r:/\bST(?=\s)/,w:"SAINT"}],pca.diacritics=[{r:/[ÀÁÂÃ]/gi,w:"A"},{r:/Å/gi,w:"AA"},{r:/[ÆæÄ]/gi,w:"AE"},{r:/Ç/gi,w:"C"},{r:/Ð/gi,w:"DJ"},{r:/[ÈÉÊË]/gi,w:"E"},{r:/[ÌÍÏ]/gi,w:"I"},{r:/Ñ/gi,w:"N"},{r:/[ÒÓÔÕ]/gi,w:"O"},{r:/[ŒØÖ]/gi,w:"OE"},{r:/Š/gi,w:"SH"},{r:/ß/gi,w:"SS"},{r:/[ÙÚÛ]/gi,w:"U"},{r:/Ü/gi,w:"UE"},{r:/[ŸÝ]/gi,w:"ZH"},{r:/-/gi,w:" "},{r:/[.,]/gi,w:""}],pca.hypertext=[{r:/&/g,w:"&amp;"},{r:/"/g,w:"&quot;"},{r:/'/g,w:"&#39;"},{r:/</g,w:"&lt;"},{r:/>/g,w:"&gt;"}],pca.requestQueue=[],pca.requestCache={},pca.scriptRequests=[],pca.waitingRequest=!1,pca.blockRequests=!1,pca.styleFixes=[],pca.agent=navigator&&navigator.userAgent||"",pca.galaxyFix=/Safari\/534.30/.test(pca.agent)&&/GT-I8190|GT-I9100|GT-I9305|GT-P3110/.test(pca.agent),pca.container=null,pca.XMLHttpRequest=window.XMLHttpRequest;var ready=!1,readyList=[];pca.fuzzyMatch=!0,pca.fuzzyTags=["*"],pca.ready=function(e){if(ready){if(readyList.length){var t=readyList;readyList=[];for(var n=0;n<t.length;n++)t[n]()}e&&e()}else"function"==typeof e&&readyList.push(e)},pca.Eventable=function(e){var t=e||this;return t.listeners={},t.listen=function(e,n){t.listeners[e]=t.listeners[e]||[],t.listeners[e].push(n)},t.ignore=function(e,n){if(t.listeners[e])for(var i=0;i<t.listeners[e].length;i++)if(t.listeners[e][i]===n){t.listeners[e].splice(i,1);break}},t.fire=function(e,n){if(t.listeners[e])for(var i=0;i<t.listeners[e].length;i++){for(var a=[n],o=2;o<arguments.length;o++)a.push(arguments[o]);t.listeners[e][i].apply(t,a)}},t},pca.Request=function(e,t,n,i){var a=new pca.Eventable(this);a.service=e||"",a.data=t||{},a.success=n||function(){},a.error=i||function(){},a.response=null,a.cache=!!a.data.$cache,a.queue=!!a.data.$queue,a.block=!!a.data.$block,a.post=!!a.data.$post,a.credentials=!!a.data.$credentials,a.destination=~a.service.indexOf("//")?a.service:pca.protocol+"//"+pca.host+"/"+a.service+"/"+pca.endpoint,a.query="";for(var o in a.data)a.query+=(a.query?"&":"")+o+"="+encodeURIComponent(a.data[o]);a.url=a.destination+"?"+a.query,a.callback=function(e){a.response=e,processResponse(a)},a.serviceError=function(e){a.error(e&&e.currentTarget&&e.currentTarget.statusText?"Webservice request error: "+e.currentTarget.statusText:"Webservice request failed.")},a.timeoutError=function(){a.error("Webservice request timed out.")},a.process=function(){pca.process(a)}},pca.process=function(e){processRequest(e)},pca.fetch=function(e,t,n,i){processRequest(new pca.Request(e,t,n,i))},pca.clearBlockingRequests=function(){pca.waitingRequest=!1,pca.blockRequests=!1},pca.loadScript=function(e,t,n){var i=pca.create("script",{type:"text/javascript"}),a=(n||document).getElementsByTagName("head")[0];i.onload=i.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i.onload=i.onreadystatechange=null,(t||function(){})())},i.src=(~e.indexOf("/")?"":pca.protocol+"//"+pca.host+"/js/")+e,a.insertBefore(i,a.firstChild)},pca.loadStyle=function(e,t,n){var i=pca.create("link",{type:"text/css",rel:"stylesheet"}),a=(n||document).getElementsByTagName("head")[0];i.onload=i.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i.onload=i.onreadystatechange=null,(t||function(){})())},i.href=(~e.indexOf("/")?"":pca.protocol+"//"+pca.host+"/css/")+e,a.insertBefore(i,a.firstChild)},pca.Item=function(e,t){var n=new pca.Eventable(this),i="pcaselected";return n.data=e,n.format=t,n.html=pca.formatLine(e,t),n.title=e.title||pca.removeHtml(n.html),n.tag=pca.formatTag(e.tag||n.html),n.element=pca.create("div",{className:"pcaitem",innerHTML:n.html,title:n.title}),n.visible=!0,n.highlight=function(){return pca.addClass(n.element,i),n.fire("highlight"),n},n.lowlight=function(){return pca.removeClass(n.element,i),n.fire("lowlight"),n},n.mouseover=function(){n.fire("mouseover")},n.mouseout=function(){n.fire("mouseout")},n.mousedown=function(){n.fire("mousedown")},n.mouseup=function(){n.fire("mouseup"),pca.galaxyFix&&n.select()},n.click=function(){n.fire("click"),pca.galaxyFix||n.select()},n.select=function(){return n.fire("select",n.data),n},n.hide=function(){return n.visible=!1,n.element.style.display="none",n.fire("hide"),n},n.show=function(){return n.visible=!0,n.element.style.display="",n.fire("show"),n},pca.listen(n.element,"mouseover",n.mouseover),pca.listen(n.element,"mouseout",n.mouseout),pca.listen(n.element,"mousedown",n.mousedown),pca.listen(n.element,"mouseup",n.mouseup),pca.listen(n.element,"click",n.click),n},pca.Collection=function(){var e=new pca.Eventable(this);return e.items=[],e.highlighted=-1,e.count=0,e.firstItem=null,e.lastItem=null,e.firstVisibleItem=null,e.lastVisibleItem=null,e.add=function(t,n,i){function a(t){var a=new pca.Item(t,n);return a.listen("mouseover",function(){e.highlight(a)}),a.listen("select",function(t){e.fire("select",t),i(t)}),e.items.push(a),o.push(a),a}var o=[];if(i=i||function(){},t.length)for(var r=0;r<t.length;r++)a(t[r]);else a(t);return e.count+=t.length,e.firstVisibleItem=e.firstItem=e.items[0],e.lastVisibleItem=e.lastItem=e.items[e.items.length-1],e.fire("add",o),e},e.sort=function(t){return e.items.sort(function(e,n){return t?e.data[t]>n.data[t]?1:-1:e.tag>n.tag?1:-1}),e.fire("sort"),e},e.reverse=function(){return e.items.reverse(),e.fire("reverse"),e},e.filter=function(t){var n=pca.formatTag(t),i=e.count;return e.count=0,e.firstVisibleItem=null,e.lastVisibleItem=null,e.all(function(t){~t.tag.indexOf(n)?(t.show(),e.count++,e.firstVisibleItem=e.firstVisibleItem||t,e.lastVisibleItem=t):t.hide()}),i!==e.count&&e.fire("filter"),e},e.match=function(t){var n=pca.formatTag(t),i=[];return e.all(function(e){~e.tag.indexOf(n)&&i.push(e)}),i},e.clear=function(){return e.items=[],e.count=0,e.highlighted=-1,e.firstItem=null,e.lastItem=null,e.firstVisibleItem=null,e.lastVisibleItem=null,e.fire("clear"),e},e.all=function(t){for(var n=0;n<e.items.length&&t(e.items[n],n)!==!1;n++);return e},e.highlight=function(t){return~e.highlighted&&e.items[e.highlighted].lowlight(),e.highlighted=e.index(t),~e.highlighted&&e.items[e.highlighted].highlight(),e.fire("highlight",t),e},e.index=function(t){for(var n=0;n<e.items.length;n++)if(e.items[n]===t)return n;return-1},e.first=function(t){for(var n=0;n<e.items.length;n++)if(t?t(e.items[n]):e.items[n].visible)return e.items[n];return null},e.last=function(t){for(var n=e.items.length-1;n>=0;n--)if(t?t(e.items[n]):e.items[n].visible)return e.items[n];return null},e.next=function(t){for(var n=e.highlighted+1;n<e.items.length;n++)if(t?t(e.items[n]):e.items[n].visible)return e.items[n];return e.first()},e.previous=function(t){for(var n=e.highlighted-1;n>=0;n--)if(t?t(e.items[n]):e.items[n].visible)return e.items[n];return e.last()},e.visibleItems=function(){var t=[];return e.all(function(e){e.visible&&t.push(e)}),t},e},pca.List=function(e){function t(e,t,i){var a=new pca.Item(e,t);return a.listen("mouseover",function(){n.collection.highlight(a),a.highlight()}),n.collection.listen("highlight",a.lowlight),a.listen("select",function(e){n.collection.fire("select",e),i(e)}),a}var n=new pca.Eventable(this);return n.options=e||{},n.element=pca.create("div",{className:"pca pcalist"}),n.collection=new pca.Collection,n.visible=!0,n.scroll={held:!1,moved:!1,origin:0,position:0,x:0,y:0,dx:0,dy:0},n.highlightedItem=null,n.headerItem=null,n.footerItem=null,n.firstItem=null,n.lastItem=null,n.firstItemClass="pcafirstitem",n.lastItemClass="pcalastitem",n.options.minItems=n.options.minItems||0,n.options.maxItems=n.options.maxItems||10,n.options.allowTab=n.options.allowTab||!1,n.show=function(){return n.visible=!0,n.element.style.display="",n.fire("show"),n.resize(),n},n.hide=function(){return n.visible=!1,n.element.style.display="none",n.fire("hide"),n},n.draw=function(){return n.destroy(),n.headerItem&&n.element.appendChild(n.headerItem.element),n.collection.all(function(e){n.element.appendChild(e.element)}),n.footerItem&&n.element.appendChild(n.footerItem.element),n.resize(),n.fire("draw"),n},n.markItems=function(){n.firstItem&&pca.removeClass(n.firstItem.element,n.firstItemClass),n.lastItem&&pca.removeClass(n.lastItem.element,n.lastItemClass),n.collection.count&&(n.firstItem=n.headerItem||n.collection.firstVisibleItem,n.lastItem=n.footerItem||n.collection.lastVisibleItem,pca.addClass(n.firstItem.element,n.firstItemClass),pca.addClass(n.lastItem.element,n.lastItemClass))},n.add=function(e,t,i){return n.collection.add(e,t,i),n.draw(),n},n.destroy=function(){for(;n.element.childNodes&&n.element.childNodes.length;)n.element.removeChild(n.element.childNodes[0]);return n},n.clear=function(){return n.collection.clear(),n.destroy(),n.fire("clear"),n},n.setScroll=function(e){return n.element.scrollTop=e,n.fire("scroll"),n},n.enableTouch=function(){function e(e){e=e||window.event,n.scroll.held=!0,n.scroll.moved=!1,n.scroll.origin=parseInt(n.scrollTop),n.scroll.y=parseInt(e.touches[0].pageY)}function t(){n.scroll.held=!1}function i(){n.scroll.held=!1}function a(e){n.scroll.held&&(e=e||window.event,pca.smash(e),n.scroll.dy=n.scroll.y-parseInt(e.touches[0].pageY),n.scroll.position=n.scroll.origin+n.scroll.dy,n.setScroll(n.scroll.position),n.scroll.moved=!0)}return pca.listen(n.element,"touchstart",e),pca.listen(n.element,"touchmove",a),pca.listen(n.element,"touchend",t),pca.listen(n.element,"touchcancel",i),n},n.move=function(e){return e&&(n.collection.highlight(e),(e===n.headerItem||e===n.footerItem)&&e.highlight(),n.scrollToItem(e)),n},n.next=function(){return n.move(n.nextItem())},n.previous=function(){return n.move(n.previousItem())},n.first=function(){return n.move(n.firstItem)},n.last=function(){return n.move(n.lastItem)},n.nextItem=function(){return n.highlightedItem?n.highlightedItem===n.collection.lastVisibleItem&&(n.footerItem||n.headerItem)?n.footerItem||n.headerItem:n.footerItem&&n.headerItem&&n.highlightedItem===n.footerItem?n.headerItem:n.collection.next():n.firstItem},n.previousItem=function(){return n.highlightedItem?n.highlightedItem===n.collection.firstVisibleItem&&(n.footerItem||n.headerItem)?n.headerItem||n.footerItem:n.footerItem&&n.headerItem&&n.highlightedItem===n.headerItem?n.footerItem:n.collection.previous():n.lastItem},n.currentItem=function(){return n.highlightedItem},n.selectable=function(){return n.visible&&!!n.currentItem()},n.select=function(){return n.selectable()&&n.currentItem().select(),n},n.navigate=function(e){switch(e){case 40:return n.next(),!0;case 38:return n.previous(),!0;case 13:if(n.selectable())return n.select(),!0;case 9:if(n.options.allowTab)return n.next(),!0}return!1},n.scrollToItem=function(e){return n.scroll.position=n.element.scrollTop,e.element.offsetTop<n.scroll.position?(n.scroll.position=e.element.offsetTop,n.setScroll(n.scroll.position)):e.element.offsetTop+e.element.offsetHeight>n.scroll.position+n.element.offsetHeight&&(n.scroll.position=e.element.offsetTop+e.element.offsetHeight-n.element.offsetHeight,n.setScroll(n.scroll.position)),n},n.filter=function(e){var t=n.collection.count;return n.collection.filter(e),n.markItems(),t!==n.collection.count&&n.fire("filter",e),n},n.getHeight=function(){for(var e=n.collection.visibleItems(),t=n.headerItem?pca.getSize(n.headerItem.element).height:0,i=n.footerItem?pca.getSize(n.footerItem.element).height:0,a=0,o=0,r=0;r<e.length&&r<n.options.maxItems;r++)a=pca.getSize(e[r].element).height,o+=a;return e.length<n.options.minItems&&(o+=(a+1)*(n.options.minItems-e.length)),o+t+i},n.resize=function(){var e=n.getHeight();e>0&&(n.element.style.height=e+"px")},n.setHeaderItem=function(e,i,a){return n.headerItem=t(e,i,a),pca.addClass(n.footerItem.element,"pcaheaderitem"),n.markItems(),n},n.setFooterItem=function(e,i,a){return n.footerItem=t(e,i,a),pca.addClass(n.footerItem.element,"pcafooteritem"),n.markItems(),n},n.collection.listen("highlight",function(e){n.highlightedItem=e}),n.collection.listen("add",function(e){n.markItems(),n.fire("add",e)}),n.options.name&&(pca.setAttributes(n.element,{id:n.options.name,role:"listbox","aria-activedescendant":""}),n.collection.listen("add",function(e){function t(e){e.listen("highlight",function(){pca.setAttributes(n.element,{"aria-activedescendant":e.id})})}for(var i=0;i<e.length;i++)t(e[i]);n.collection.all(function(e,t){e.element.id=e.id=n.options.name+"_item"+t,pca.setAttributes(e.element,{role:"option"})})})),n},pca.AutoComplete=function(e,t){function n(){a.checkHide()}function i(){a.resize()}var a=new pca.Eventable(this);return a.options=t||{},a.options.force=a.options.force||!1,a.options.allowTab=a.options.allowTab||!1,a.options.onlyDown=a.options.onlyDown||!1,a.element=pca.create("div",{className:"pcaautocomplete pcatext"}),a.anchors=[],a.list=new pca.List(a.options),a.fieldListeners=[],a.field=null,a.positionField=null,a.visible=!0,a.hover=!1,a.focused=!1,a.upwards=!1,a.controlDown=!1,a.disabled=!1,a.fixedWidth=!1,a.emptyMessage=a.options.emptyMessage||"",a.skipFilter=!1,a.stealth=!1,a.header={element:pca.create("div",{className:"pcaheader"}),headerText:pca.create("div",{className:"pcamessage"}),init:function(){this.hide()},setContent:function(e){return e=e||"","string"==typeof e?this.element.innerHTML=e:this.element.appendChild(e),a.fire("header"),this},setText:function(e){return e=e||"",this.element.appendChild(this.headerText),"string"==typeof e?(pca.clear(this.headerText),this.headerText.appendChild(pca.create("span",{className:"pcamessageicon"})),this.headerText.appendChild(pca.create("span",{innerHTML:e}))):this.headerText.appendChild(e),a.fire("header"),this},clear:function(){return this.setContent(),a.fire("header"),this},show:function(){return this.element.style.display="",a.fire("header"),this},hide:function(){return this.element.style.display="none",a.fire("header"),this}},a.footer={element:pca.create("div",{className:"pcafooter"}),init:function(){this.hide()},setContent:function(e){return e=e||"","string"==typeof e?this.element.innerHTML=e:this.element.appendChild(e),a.fire("footer"),this},show:function(){return this.element.style.display="",a.fire("footer"),this},hide:function(){return this.element.style.display="none",a.fire("footer"),this}},a.load=function(){if(e.length&&e.constructor===Array)for(var t=0;t<e.length;t++)a.attach(pca.getElement(e[t]));else a.attach(pca.getElement(e));return pca.listen(a.element,"mouseover",function(){a.hover=!0}),pca.listen(a.element,"mouseout",function(){a.hover=!1}),pca.listen(document,"click",n),pca.listen(window,"resize",i),(document.documentMode&&document.documentMode<=7||/\bMSIE\s(7|6)/.test(pca.agent))&&a.setWidth(280),document.documentMode&&document.documentMode<=5&&(pca.applyStyleFixes(".pca .pcafooter",{fontSize:"0pt"}),pca.applyStyleFixes(".pca .pcaflag",{fontSize:"0pt"})),a},a.attach=function(e){function t(e,t,n){pca.listen(e,t,n),a.fieldListeners.push({field:e,event:t,action:n})}function n(e){function n(){r.appendChild(a.element),a.focus(e)}var i=pca.create("table",{className:"pca pcaanchor",cellPadding:0,cellSpacing:0}),o=[i.insertRow(0).insertCell(0),i.insertRow(1).insertCell(0)],r=pca.create("div",{className:"pcachain"});return e&&e.tagName?(e.parentNode.insertBefore(i,e),o[0].appendChild(e),o[1].appendChild(r),a.anchors.push(i),pca.inputField(e)&&(t(e,"keyup",a.keyup),t(e,"keydown",a.keydown),t(e,"focus",n),t(e,"blur",a.blur),t(e,"keypress",a.keypress),t(e,"paste",a.paste),"unknown"!=typeof document.activeElement&&e===document.activeElement&&n()),t(e,"click",function(){a.click(e)}),t(e,"dblclick",function(){a.dblclick(e)}),void t(e,"change",function(){a.change(e)})):void pca.append(a.element)}function i(e){function n(){a.focus(e)}pca.append(a.element),e&&e.tagName&&(pca.inputField(e)&&(t(e,"keyup",a.keyup),t(e,"keydown",a.keydown),t(e,"focus",n),t(e,"blur",a.blur),t(e,"keypress",a.keypress),t(e,"paste",a.paste),"unknown"!=typeof document.activeElement&&e===document.activeElement&&n()),t(e,"click",function(){a.click(e)}),t(e,"dblclick",function(){a.dblclick(e)}),t(e,"change",function(){a.change(e)}))}a.options.force?n(e):i(e)},a.position=function(e){var t=pca.getPosition(e),n=pca.getSize(e),i=pca.getTopOffsetParent(e),o=pca.getParentScroll(e),r=pca.getSize(a.element),l=pca.getSize(window),s=pca.getScroll(window),c=!pca.isPage(i),p=t.top+r.height-(c?0:s.top)<l.height,u=t.top-(c?0:s.top)>r.height;a.upwards=!p&&u&&!a.options.onlyDown,a.upwards?a.options.force?a.element.style.top=-(r.height+n.height+2)+"px":(a.element.style.top=t.top-o.top-r.height+(c?s.top:0)+"px",a.element.style.left=t.left-o.left+(c?s.left:0)+"px"):a.options.force?a.element.style.top="auto":(a.element.style.top=t.top-o.top+n.height+1+(c?s.top:0)+"px",a.element.style.left=t.left-o.left+(c?s.left:0)+"px"),a.options.left&&(a.element.style.left=parseInt(a.element.style.left)+parseInt(a.options.left)+"px"),a.options.top&&(a.element.style.top=parseInt(a.element.style.top)+parseInt(a.options.top)+"px");var d=parseInt(pca.getStyle(a.element,"borderLeftWidth"))+parseInt(pca.getStyle(a.element,"borderRightWidth"))||0,m=Math.max(pca.getSize(e).width-d,0);return a.fixedWidth||(a.element.style.minWidth=m+"px"),(document.documentMode&&document.documentMode<=7||/\bMSIE\s(7|6)/.test(pca.agent))&&(a.setWidth(Math.max(m,280)),a.element.style.left=(parseInt(a.element.style.left)||0)-2+"px",a.element.style.top=(parseInt(a.element.style.top)||0)-2+"px"),a.positionField=e,a.fire("move"),a},a.reposition=function(){return a.positionField&&a.position(a.positionField),a},a.prompt=function(e,t){if("number"==typeof t){if(0===t?e=" "+e:t>=e.length?(e+=" ",t++):(e=e.substring(0,t)+"  "+e.substring(t,e.length),t++),pca.setValue(a.field,e),a.field.setSelectionRange)a.field.focus(),a.field.setSelectionRange(t,t);else if(a.field.createTextRange){var n=a.field.createTextRange();n.move("character",t),n.select()}}else pca.setValue(a.field,e);return a},a.show=function(){return a.disabled||a.stealth||(a.visible=!0,a.element.style.display="",a.list.collection.count?(a.options.emptyMessage&&a.header.clear().hide(),a.list.show()):(a.options.emptyMessage&&a.header.setText(a.options.emptyMessage).show(),a.list.hide()),a.setScroll(0),a.reposition(),a.fire("show")),a},a.showAll=function(){a.list.filter(""),a.show()},a.hide=function(){return a.visible=!1,a.element.style.display="none",a.fire("hide"),a},a.focus=function(e){a.field=e,a.focused=!0,a.show(),a.position(e),a.fire("focus")},a.blur=function(){a.focused=!1,a.checkHide(),a.fire("blur")},a.checkHide=function(){return!a.visible||a.focused||a.hover||a.hide(),a},a.handleKey=function(e,t){27===e?(a.hide(),a.fire("escape")):17===e?a.controlDown=!1:8===e||46===e?(a.filter(),a.fire("delete")):0!==e&&46>=e&&32!==e?a.visible&&a.list.navigate(e)?t&&pca.smash(t):(38===e||40===e)&&a.filter():a.visible&&a.filter(),a.fire("keyup",e)},a.keydown=function(e){e=e||window.event;var t=e.which||e.keyCode;17===t&&(a.controlDown=!0),9===t&&a.options.allowTab&&pca.smash(e)},a.keyup=function(e){e=e||window.event;var t=e.which||e.keyCode;a.handleKey(t,e)},a.keypress=function(e){var t=window.event?window.event.keyCode:e.which;a.visible&&13===t&&a.list.selectable()&&pca.smash(e)},a.paste=function(){window.setTimeout(function(){a.filter(),a.fire("paste")},0)},a.click=function(e){a.fire("click",e)},a.dblclick=function(e){a.fire("dblclick",e)},a.change=function(e){a.fire("change",e)},a.resize=function(){a.visible&&a.reposition()},a.add=function(e,t,n){return a.list.add(e,t,n),a},a.clear=function(){return a.list.clear(),a},a.setScroll=function(e){return a.list.setScroll(e),a},a.setWidth=function(e){return"number"==typeof e?(e=Math.max(e,220),a.element.style.width=e+"px",document.documentMode&&document.documentMode<=5&&(e-=2),a.list.element.style.width=e+"px"):(a.element.style.width=e,a.list.element.style.width=e),a.fixedWidth="auto"!==e,a.element.style.minWidth=0,a},a.setHeight=function(e){return"number"==typeof e?a.list.element.style.height=e+"px":a.list.element.style.height=e,a},a.filter=function(e){return e=e||pca.getValue(a.field),a.skipFilter?a.list.collection.match(e).length<a.list.collection.count&&a.list.fire("filter"):(a.list.filter(e,a.skipFilter),!e||a.list.collection.count||a.skipFilter||a.options.emptyMessage?a.show():a.hide()),a.fire("filter",e),a},a.disable=function(){return a.disabled=!0,a},a.enable=function(){return a.disabled=!1,a},a.destroy=function(){pca.remove(a.element),pca.ignore(document,"click",n),pca.ignore(window,"resize",i);for(var e=0;e<a.fieldListeners.length;e++)pca.ignore(a.fieldListeners[e].field,a.fieldListeners[e].event,a.fieldListeners[e].action)},a.element.appendChild(a.header.element),a.element.appendChild(a.list.element),a.element.appendChild(a.footer.element),a.header.init(),a.footer.init(),e&&a.load(e),a.options.width&&a.setWidth(a.options.width),a.options.height&&a.setHeight(a.options.height),a.options.className&&pca.addClass(a.element,a.options.className),a.field||a.hide(),a},pca.Modal=function(e){function t(e){return e=e||{},e.type=e.type||"text",e}var n=new pca.Eventable(this);return n.options=e||{},n.element=pca.create("div",{className:"pcamodal"}),n.border=pca.create("div",{className:"pcaborder"}),n.frame=pca.create("div",{className:"pcaframe"}),n.content=pca.create("div",{className:"pcacontent pcatext"}),n.mask=pca.create("div",{className:"pcafullscreen pcamask"}),n.form=[],n.header={element:pca.create("div",{className:"pcaheader"}),headerText:pca.create("div",{className:"pcatitle"},n.options.titleStyle||""),init:function(){this.setText(n.options.title||"")},setContent:function(e){return e=e||"","string"==typeof e?this.element.innerHTML=e:this.element.appendChild(e),n.fire("header"),this},setText:function(e){return e=e||"",this.element.appendChild(this.headerText),"string"==typeof e?this.headerText.innerHTML=e:this.headerText.appendChild(e),n.fire("header"),this},show:function(){return this.element.style.display="",n.fire("header"),this},hide:function(){return this.element.style.display="none",n.fire("header"),this}},n.footer={element:pca.create("div",{className:"pcafooter"}),setContent:function(e){return e=e||"","string"==typeof e?this.element.innerHTML=e:this.element.appendChild(e),n.fire("footer"),this},show:function(){return this.element.style.display="",n.fire("header"),this},hide:function(){return this.element.style.display="none",n.fire("header"),this}},n.setTitle=function(e){n.header.setText(e).show()},n.setContent=function(e){return"string"==typeof e?n.content.innerHTML=e:n.content.appendChild(e),n.fire("change"),n},n.addField=function(e,i){i=t(i);var a=pca.create("div",{className:"pcainputrow"}),o=pca.create(i.tag||"input",i),r=pca.create("label",{htmlFor:o.id||"",innerHTML:e||""});return a.appendChild(r),a.appendChild(o),n.setContent(a),n.form.push({label:e,element:o}),o},n.addHalfFields=function(e,i,a){i=t(i),a=t(a);var o=pca.create("div",{className:"pcainputrow"}),r=pca.create(i.tag||"input",i),l=pca.create(a.tag||"input",a),s=pca.create("label",{htmlFor:r.id||"",innerHTML:e||""});return pca.addClass(r,"pcahalf"),pca.addClass(l,"pcahalf"),o.appendChild(s),o.appendChild(r),o.appendChild(l),n.setContent(o),n.form.push({label:"First "+e,element:r}),n.form.push({label:"Second "+e,element:l}),[r,l]},n.addButton=function(e,t,i){function a(){for(var e={},i=0;i<n.form.length;i++)e[n.form[i].label]=pca.getValue(n.form[i].element);t(e)}var o=pca.create("input",{type:"button",value:e,className:"pcabutton"});return t=t||function(){},!i||document.documentMode&&document.documentMode<=7||(o.style.cssFloat="right"),pca.listen(o,"click",a),n.footer.setContent(o),o},n.centre=function(){var e=pca.getSize(n.element);return n.element.style.marginTop=-(e.height/2)+"px",n.element.style.marginLeft=-(e.width/2)+"px",n},n.show=function(){return document.documentMode&&document.documentMode<=5||/\bMSIE\s6/.test(pca.agent)||(n.element.style.display="",n.mask.style.display="",n.centre(),n.fire("show")),n},n.hide=function(){return n.element.style.display="none",n.mask.style.display="none",n.fire("hide"),n},n.clear=function(){for(;n.content.childNodes.length;)n.content.removeChild(n.content.childNodes[0]);for(;n.footer.element.childNodes.length;)n.footer.element.removeChild(n.footer.element.childNodes[0]);return n.form=[],n.fire("clear"),n},pca.listen(n.mask,"click",n.hide),n.element.appendChild(n.border),n.element.appendChild(n.frame),n.frame.appendChild(n.header.element),n.frame.appendChild(n.content),n.frame.appendChild(n.footer.element),n.header.init(),pca.append(n.mask),pca.append(n.element),n.hide(),n},pca.Tooltip=function(e,t){var n=new pca.Eventable(this);return n.element=pca.create("div",{className:"pcatooltip"}),n.background=pca.create("div",{className:"pcabackground"}),n.message=pca.create("div",{className:"pcamessage",innerText:t}),n.show=function(){return n.element.style.display="",n.position(),n.fire("show"),n},n.hide=function(){return n.element.style.display="none",n.fire("hide"),n},n.setMessage=function(e){pca.setValue(n.message,e)},n.position=function(){var t=pca.getPosition(e),i=pca.getSize(e),a=pca.getTopOffsetParent(e),o=pca.getSize(n.message),r=pca.getSize(window),l=pca.getScroll(window),s=!pca.isPage(a),c=t.top-o.height-5+(s?l.top:0),p=t.left+i.width/2-o.width/2+(s?l.left:0);c=Math.min(c,r.height+l.top-o.height),c=Math.max(c,0),p=Math.min(p,r.width+l.left-o.width),p=Math.max(p,0),n.element.style.top=c+"px",n.element.style.left=p+"px"},(e=pca.getElement(e))&&(pca.listen(e,"mouseover",n.show),pca.listen(e,"mouseout",n.hide)),n.element.appendChild(n.background),n.element.appendChild(n.message),n.setMessage(t),pca.append(n.element),n.hide(),n},pca.formatLine=function(e,t){function n(t,n){var i=("function"==typeof e[t]?e[t]():e[t])||"";return"!"===n?i.toUpperCase():i}return t=t.replace(/\{([^\}]*\{(\w+)([^\}\w])?\}[^\}]*)\}/g,function(e,t,i,a){var o=n(i,a);return o?t.replace(/\{(\w+)([^\}\w])?\}/g,o):""}),t.replace(/\{(\w+)([^\}\w])?\}/g,function(e,t,i){return n(t,i)})},pca.formatTag=function(e){return e?pca.replaceList(pca.replaceList(pca.removeHtml(e.toUpperCase()),pca.diacritics),pca.synonyms):""},pca.formatTagWords=function(e){return pca.formatTag(e).split(" ")},pca.formatCamel=function(e,t){function n(e,n,i){return n+t+i}return t=t||" ",e=e.replace(/([a-z])([A-Z0-9])/g,n),e=e.replace(/([0-9])([A-Z])/g,n),e=e.replace(/([A-Z])([A-Z][a-z])/g,n)},pca.replaceList=function(e,t){for(var n=0;n<t.length;n++)e=e.toString().replace(t[n].r,t[n].w);return e},pca.removeHtml=function(e){return e.replace(/<(?:.|\s)*?>+/g,"")},pca.escapeHtml=function(e){return pca.replaceList(e,pca.hypertext)},pca.validId=function(e){return/[a-z0-9\-_:\.\[\]]+/gi.exec(e)},pca.trimSpaces=function(e){return e.replace(/^\s+|\s(?=\s)|\s$/g,"")},pca.tidy=function(e,t){t=t.replace("\\","\\\\");var n=new RegExp("^"+t+"+|"+t+"(?="+t+")|"+t+"$","gi");return e.replace(n,"")},pca.getText=function(e){return/[a-zA-Z][a-zA-Z\s]+[a-zA-Z]/.exec(e)},pca.getNumber=function(e){return/\d+/.exec(e)},pca.parseJSON=function(text){return text&&/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?"undefined"!=typeof JSON?JSON.parse(text):eval(text):{}},pca.parseJSONDate=function(e){return new Date(parseInt(pca.getNumber(e)))},pca.containsWord=function(e,t){var n=new RegExp("\\b"+t+"\\b","gi");return n.test(e)},pca.removeWord=function(e,t){var n=new RegExp("\\s?\\b"+t+"\\b","gi");return e.replace(n,"")},pca.merge=function(e,t){for(var n in e)t[n]||(t[n]=e[n]);return t},pca.getElement=function(e,t){if(!e)return null;if("number"==typeof e.nodeType)return e;if("string"==typeof e){t=pca.getElement(t)||document;var n=t.getElementById?t.getElementById(e):null;if(n)return n;var i=t.getElementsByName?t.getElementsByName(e):null;if(i.length)return i[0]}return pca.fuzzyMatch?pca.getElementByRegex(e,t):null},pca.getElementByRegex=function(e,t){if("string"==typeof e)try{e=new RegExp(e)}catch(n){
return null}if(e&&"object"==typeof e&&e.constructor===RegExp){t=pca.getElement(t)||document;for(var i=0;i<pca.fuzzyTags.length;i++)for(var a=t.getElementsByTagName(pca.fuzzyTags[i]),o=0;o<a.length;o++){var r=a[o];if(r.id&&e.test(r.id))return r}}return null},pca.getValue=function(e){if(e=pca.getElement(e)){if("INPUT"===e.tagName||"TEXTAREA"===e.tagName){if("checkbox"===e.type)return e.checked;if("radio"!==e.type)return e.value;for(var t=document.getElementsByName(e.name),n=0;n<t.length;n++)if(t[n].checked)return t[n].value}if("SELECT"===e.tagName){if(e.selectedIndex<0)return"";var i=e.options[e.selectedIndex];return i.value||i.text||""}if("DIV"===e.tagName||"SPAN"===e.tagName||"TD"===e.tagName||"LABEL"===e.tagName)return e.innerHTML}return""},pca.setValue=function(e,t){if((t||""===t)&&(e=pca.getElement(e))){var n=t.toString(),i=pca.formatTag(n);if("INPUT"===e.tagName)if("checkbox"===e.type)e.checked="boolean"==typeof t&&t||"TRUE"===i;else if("radio"===e.type){for(var a=document.getElementsByName(e.name),o=0;o<a.length;o++)if(pca.formatTag(a[o].value)===i)return void(a[o].checked=!0)}else e.value=pca.tidy(n.replace(/\\n|\n/gi,", "),", ");else if("TEXTAREA"===e.tagName)e.value=n.replace(/\\n|\n/gi,"\n");else if("SELECT"===e.tagName){for(var r=0;r<e.options.length;r++)if(pca.formatTag(e.options[r].value)===i||pca.formatTag(e.options[r].text)===i)return void(e.selectedIndex=r)}else("DIV"===e.tagName||"SPAN"===e.tagName||"TD"===e.tagName||"LABEL"===e.tagName)&&(e.innerHTML=n.replace(/\\n|\n/gi,"<br/>"))}},pca.inputField=function(e){return(e=pca.getElement(e))?e.tagName&&("INPUT"===e.tagName||"TEXTAREA"===e.tagName)&&e.type&&("text"===e.type||"search"===e.type||"email"===e.type||"textarea"===e.type):!1},pca.selectList=function(e){return(e=pca.getElement(e))?e.tagName&&"SELECT"===e.tagName:!1},pca.getSelectedItem=function(e){return(e=pca.getElement(e))&&"SELECT"===e.tagName&&e.selectedIndex>=0?e.options[e.selectedIndex]:null},pca.checkBox=function(e){return(e=pca.getElement(e))?e.tagName&&"INPUT"===e.tagName&&e.type&&"checkbox"===e.type:!1},pca.clear=function(e){return pca.setValue(e,""),pca},pca.getPosition=function(e){var t={left:0,top:0};if(e=pca.getElement(e)){if(!e.tagName)return t;if("undefined"!=typeof e.getBoundingClientRect){var n=e.getBoundingClientRect(),i=!pca.isPage(pca.getTopOffsetParent(e)),a=pca.getScroll(window),o=pca.getParentScroll(e);return{left:n.left+o.left+(i?0:a.left),top:n.top+o.top+(i?0:a.top)}}var r=0,l=0;do r+=e.offsetLeft,l+=e.offsetTop;while(e=e.offsetParent);return{left:r,top:l}}return t},pca.isPage=function(e){return e===window||e===document||e===document.body},pca.getScroll=function(e){return{left:parseInt(e.scrollX||e.scrollLeft,10)||(pca.isPage(e)?parseInt(document.documentElement.scrollLeft)||0:0),top:parseInt(e.scrollY||e.scrollTop,10)||(pca.isPage(e)?parseInt(document.documentElement.scrollTop)||0:0)}},pca.getSize=function(e){return{height:e.offsetHeight||e.innerHeight||(pca.isPage(e)?document.documentElement.clientHeight||document.body.clientHeight:0),width:e.offsetWidth||e.innerWidth||(pca.isPage(e)?document.documentElement.clientWidth||document.body.clientWidth:0)}},pca.getParentScroll=function(e){var t={left:0,top:0};if(e=pca.getElement(e)){if(!e.tagName)return t;if(!(e=e.parentNode))return t;var n=0,i=0;do{if(pca.isPage(e))break;n+=parseInt(e.scrollLeft)||0,i+=parseInt(e.scrollTop)||0}while(e=e.parentNode);return{left:n,top:i}}return t},pca.getTopOffsetParent=function(e){for(;e.offsetParent&&(e=e.offsetParent,"fixed"!==pca.getStyle(e,"position")););return e},pca.getStyle=function(e,t){return((window.getComputedStyle?window.getComputedStyle(e):e.currentStyle)||{})[t]||""},pca.addClass=function(e,t){(e=pca.getElement(e))&&(pca.containsWord(e.className||"",t)||(e.className+=(e.className?" ":"")+t))},pca.removeClass=function(e,t){(e=pca.getElement(e))&&(e.className=pca.removeWord(e.className,t))},pca.setAttribute=function(e,t,n){(e=pca.getElement(e))&&e.setAttribute(t,n)},pca.setAttributes=function(e,t){if(e=pca.getElement(e))for(var n in t)e.setAttribute(n,t[n])},pca.applyStyleFixes=function(e,t){for(var n=0;n<document.styleSheets.length;n++){var i=document.styleSheets[n],a=[];try{a=i.rules||i.cssRules||[]}catch(o){}for(var r=0;r<a.length;r++){var l=a[r];if(l.selectorText.toLowerCase()===e)for(var s in t)l.style[s]=t[s]}}pca.styleFixes.push({selectorText:e,fixes:t})},pca.reapplyStyleFixes=function(){var e=pca.styleFixes;pca.styleFixes=[];for(var t=0;t<e.length;t++)pca.applyStyleFixes(e[t].selectorText,e[t].fixes)},pca.createStyleSheet=function(e){document.createStyleSheet?document.createStyleSheet().cssText=e:document.head.appendChild(pca.create("style",{type:"text/css",innerHTML:e}))},pca.create=function(e,t,n){var i=document.createElement(e);for(var a in t||{})i[a]=t[a];return n&&(i.style.cssText=n),i},pca.append=function(e){pca.container||(pca.container=pca.create("div",{className:"pca"}),document.body.appendChild(pca.container)),pca.container.appendChild(e)},pca.remove=function(e){e&&e.parentNode&&e.parentNode===pca.container&&pca.container.removeChild(e)},pca.listen=function(e,t,n,i){window.addEventListener?e.addEventListener(t,n,i):e.attachEvent("on"+t,n)},pca.fire=function(e,t){if(document.createEvent){var n=document.createEvent("HTMLEvents");return n.initEvent(t,!0,!0),!e.dispatchEvent(n)}return e.fireEvent("on"+t,document.createEventObject())},pca.ignore=function(e,t,n){window.removeEventListener?e.removeEventListener(t,n):e.detachEvent("on"+t,n)},pca.smash=function(e){var t=e||window.event;t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1},pca.debug=function(e){"undefined"!=typeof console&&console.debug&&console.debug(e)},pca.debounce=function(e,t,n){var i;return function(){var a=this,o=arguments;arguments&&arguments.length>0&&(o=[{target:arguments[0].target||arguments[0].srcElement}]);var r=function(){i=null,n||e.apply(a,o)},l=n&&!i;clearTimeout(i),i=setTimeout(r,t),l&&e.apply(a,o)}},pca.fnDefined=function(e){return"function"==typeof e},pca.getLabel=function(e){for(var t=document.getElementsByTagName("LABEL"),n=0;n<t.length;n++)if(""!==t[n].htmlFor){var i=pca.getElement(t[n].htmlFor);if(i&&i.name===e||i.id===e)return t[n]}return null},pca.getReferenceToElement=function(e){return"string"==typeof e?e:e?e.id||e.name||"":""},pca.extend=function(){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])arguments[e].hasOwnProperty(t)&&(arguments[0][t]=arguments[e][t]);return arguments[0]},pca.getStyle=function(e,t){var n=function(e){return e.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()})};return e.currentStyle?e.currentStyle[n(t)]:document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null).getPropertyValue(t):e.style[n(t)]},checkDocumentLoad()}(window),function(){var e=window.pca=window.pca||{};e.Email=function(t,n){function i(){var t=f.emailElement,n=t.parentNode;if(!t.pca_wrapped){var i=t.getBoundingClientRect();f.width=i.width,f.height=i.height,f.fontSize=e.getStyle(t,"font-size");var a=e.create("div",{className:"validator validator-email validation-none"}),o=e.create("div",{className:"feedback feedback-email"});o.style.height=f.height+10+"px",o.style.width=f.height+10+"px",o.style.backgroundSize=(f.height-10>40?40:f.height-10)+"px",o.style.top="-5px",n.insertBefore(a,t),a.appendChild(t),a.appendChild(o),t.wrapper=a,a.style.height=f.height+"px",a.style.width=f.width+"px",t.pca_wrapped=!0}}function a(){var e=f.emailElement;if(e.pca_wrapped){var t=e.wrapper,n=t.parentNode;n.insertBefore(e,t),n.removeChild(t),e.pca_wrapped=!1}}function o(){var e=f.emailElement;return r(e.value)?(d(e),void l(e,c,s)):(f.fire("validate",!1),p(e),f.isValid=!1,void(e.value.length>0&&u(e,!1)))}function r(e){return h.VALIDATION_EMAIL_REGEX.test(e)}function l(t,n,i){e.fetch(f.options.provider+"/Interactive/Validate/"+h.EMAIL_VALIDATION_API_VERSION,{key:f.options.key,email:t.value,timeout:f.options.timeout,$cache:!0,$block:!0},n,i)}function s(){m(f.emailElement)}function c(e,t){var n=f.emailElement;if(e&&e.length>0){var i=e[0];f.isValid=i.ResponseCode===h.EMAIL_SUCCESS_INTERNAL_STATUS||i.ResponseCode===h.EMAIL_SUCCESS_EXTERNAL_STATUS,f.fire("validate",f.isValid,i),u(n,f.isValid),m(n)}else m(n)}function p(){var t=f.emailElement;f.options.minimal||(t=t.wrapper),e.removeClass(t,"validation-no"),e.removeClass(t,"validation-yes"),""!==f.options.setCssClassValid.trim()&&e.removeClass(t,f.options.setCssClassValid),""!==f.options.setCssClassInvalid.trim()&&e.removeClass(t,f.options.setCssClassInvalid),e.addClass(t,"validation-none")}function u(t,n){f.options.minimal||(t=t.wrapper);var i="validation-"+(n?"yes":"no");g&&(i+="-fallback"),e.addClass(t,i),e.removeClass(t,"validation-none"),e.addClass(t,n?f.options.setCssClassValid:f.options.setCssClassInvalid)}function d(){p(),f.options.minimal||(e.removeClass(f.emailElement.wrapper,"validation-none"),g?e.addClass(f.emailElement.wrapper,"pca-loading-fallback"):e.addClass(f.emailElement.wrapper,"pca-loading"))}function m(){f.options.minimal||(g?e.removeClass(f.emailElement.wrapper,"pca-loading-fallback"):e.removeClass(f.emailElement.wrapper,"pca-loading"))}var f=new e.Eventable(this);f.fields=t||[],f.emailElement=null,f.isValid=!1,f.width=0,f.height=0,f.fontSize="11px",f.options=e.extend({},{provider:"EmailValidation",key:"",timeout:5e3,minimal:!1,setCssClassValid:"",setCssClassInvalid:""},n||{}),f.key=f.options.key,"string"==typeof f.options.minimal&&(f.options.minimal="true"===f.options.minimal.toLowerCase());var h={EMAIL_SUCCESS_INTERNAL_STATUS:"Valid",EMAIL_SUCCESS_EXTERNAL_STATUS:"Valid_CatchAll",EMAIL_VALIDATION_API_VERSION:"v2.00",VALIDATION_KEYPRESS_TIMEOUT:1e3,VALIDATION_EMAIL_REGEX:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/},g=document.all&&!document.addEventListener;f.load=function(){for(var t=0;t<f.fields.length;t++){var n=f.fields[t];"{Email}"==n.field&&(f.emailElement=e.getElement(n.element))}f.options.minimal||null==f.emailElement||i(),null!=f.emailElement&&(e.listen(f.emailElement,"keyup",e.debounce(o,h.VALIDATION_KEYPRESS_TIMEOUT)),e.listen(f.emailElement,"blur",o),e.listen(f.emailElement,"keydown",p))},f.destroy=function(){return f.options.minimal?f:(null!=f.emailElement&&a(),f)},e.ready(f.load)}}(),function(){pca.EmailValidation=function(){var e=new pca.Eventable(this);e.controls=[],e.bindings=pca&&pca.platform&&pca.platform.getBindingsForService?pca.platform.getBindingsForService("PLATFORM_EMAILVALIDATION"):[],e.each=function(t){for(var n=0;n<e.controls.length;n++)t(e.controls[n])},e.load=function(){e.destroy();for(var t=0;t<e.bindings.length;t++){var n="";try{n=e.bindings[t].options.key}catch(i){}pca.platform.fire("fields",["emailvalidation",n,e.bindings[t].fields]),pca.platform.fire("options",["emailvalidation",n,e.bindings[t].options]);var a=new pca.Email(e.bindings[t].fields,e.bindings[t].options);a.listen("validate",function(e,t){pca.platform.fire("data",["emailvalidation",a.key,e,t||null])}),e.controls.push(a),pca.platform.fire("load",["emailvalidation",a.key,a])}pca.platform.fire("ready",["emailvalidation",e])},e.destroy=function(){e.each(function(e){e.destroy()}),e.controls=[]},pca.ready(e.load)},window.emailValidation=pca.emailValidation=new pca.EmailValidation}();